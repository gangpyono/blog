원본 링크 : https://yess.tistory.com/3

얼마 전 코딩 테스트로 next.js를 활용한 로그인 기능 구현 과제를 받았다. 1주일간의 시간이 주어졌고, 채용공고에서 작성된 글을 보고 지원해보고 싶다는 생각이 바로 들었다. (e커머스 정기구독 관련 회사였는데 공고가 내려가버려 확인이 어렵다) 기존의 next.js에 대해 선 docs를 읽어본 게 전부였고 이참에 적용도 해볼 겸 코딩 테스트 타이밍이 아주 좋았다고 생각이 들었다. 과제를 하면서 결과적으로 얻은 건 두 가지였다. 첫 번째로는 의사소통의 중요성, 두 번째로는 공식문서만 읽어본 상태에서 어느 정도 이해하고 있었다는 착각이다


## 의사소통의 중요성
메일 답신 하나로 과제의 전반적인 내용을 완전히 다르게 해석을 해버린 내용인데 주요 내용으로는 이렇다.

과제 구현 사항을 읽어보고 자연스럽게 들었던 생각이 "서버와 클라이언트를 모두 구현해야겠구나"였다. 그래서 자연스럽게 express를 활용할 생각을 했었다.(이때까지 next.js에서 api routes를 지원해주는 것도 몰랐다.) 하지만 조건사항에 주어진 패키지 이외의 패키지를 설치하는 것을 금하는 사항이 있었고, express가 설치되어있지 않았다. 그래서 node.js로 구현할 것을 의도한 건지 싶어 그래도 express에 대한 설치를 메일로 여쭤봤다. 답변으로는 아주 친절하게 다음과 같이 왔다.

### 회사 측 답변
현재 어떤 방식으로 문제에 접근하려고 하셨는지 알고 싶습니다. Next.js에 대해 학습해보신다면 Next.js가 이미 내부에 Express를 내장하고 있고, 굳이 서버를 커스텀하지 않더라도 자체 api 기능을 활용해 백엔드 기능을 활용할 수 있음을 아실 수 있을 거라 생각됩니다.
그럼에도 Express가 필요하다고 생각되신다면 어떤 용도로 사용하시려 하는지 답신 주시기 바랍니다. 현재 상황에서 어떤 해결책이 있을지 힌트를 드리도록 하겠습니다.

감사합니다.

## 그에 대한 나의 답변
아.. next.js에 내장 express가 있었는 줄 몰랐습니다.. 참고하여 활용해보겠습니다.

(지금 글을 작성하면서 느끼는 거지만  답변이라고 작성한 나의 메일만 봐도 뭔가 코 데기회를 준 것만으로도 감사하다는 생각이 든다.)

next.js에 이미 express가 내장되어 api를 작성할 수 있다는 점, 어떤 식으로 접근하려고 했는지에 대한 질문, 그럼에도 불구하고 express가 필요하다고 생각하면 어떤 용도로 사용하려는지에 대한 질문. 이러한 질문들을 무시한 체 단지 "next.js대한 이미 학습을 하셨으면"의 문장에 그냥 쪽팔려서 "참고하여 활용해보겠습니다"라는 답변을 해버렸다. 심지어 힌트까지 준다는데 말이다. 단지 내가 느꼈던 감정만을 답변으로 하고 끝이난 상태였다. 이때부터 완전히 꼬이기 시작했다. 우선 공식문서를 찾아보니 api routes를 통해 api를 작성할 수 있음을 알게 되었고, 이걸 활용해서 작성해보자!라는 생각에 이대로 쭉 api를 만들고 과제를 제출했다. 피드백의 결과를 통해  이해한 사실은 Endpoint로 요쳥을통해 프런트단에서의 처리과정을 보는 과제라는 걸 깨달았고 시작 전의 메일에 대한 답변으로 접근방식을 설명해드렸다면 분명히 바로잡을 수 있었던 부분이라 후회된다.(물론 결정적인 문제가 이것만은 아니었다.) 결국엔 질문에 대한 상대방이 듣고 싶은 대답을 해야 한다는 점. 요구사항을 읽고 의도하는 것이 무엇인지에 대한 해석 능력이 부족하여 불합격이라는 통보를 받게 되었다. 

## 착각

블로그를 새로 시작한 이유이기도 하다. 내가 알고 있다고 생각하는 개념들을 직접 작성하고 코드 작업을 통해 확인해보는 것.(기존 벨로그에선 너무 의식의 흐름이었다.) 내장 express와 같이 pre-rendering에 대한 내용으로도 오류가 발생했었는데 과제 구현 과정에서 localStorage에 접근하는 과정이 있었는데, 이게 build과정에서 계속 오류가 발생하였다. 왜 그런가 찾아보니 node.js환경에선 window객체에 접근이 불가능하다는 것이었다. build과정은 node.js 환경이니 window객체에 접근할 수 없다.  해결방법을 찾아보니  typeof window!== "undefined"의 조건문을 활용하여 build과정에서 읽지 못하게 처리해줬다. 생각해보면 pre-rendering에 대한 이해보다 build환경에 대한 이해 부족인 것 같다. 이렇게 직접 경험을 통해서 얻는 점이 많을 것이라 생각되며, 좀 더 코드 작성을 적극적으로 할 필요성을 느낀 것 같다. 
